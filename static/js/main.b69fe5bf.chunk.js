(this["webpackJsonpcolour-timer"]=this["webpackJsonpcolour-timer"]||[]).push([[0],{17:function(t,e,n){},19:function(t,e,n){},20:function(t,e,n){},22:function(t,e,n){},23:function(t,e,n){},24:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),a=n(11),c=n.n(a),u=(n(17),n(5)),l=n.n(u),s=n(9),i=n(3),b=(n(19),n(8)),j=n(2),d=n(6),O=n(12),f=function(t){return"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")")},h=(n(20),n(1));var C=function(t){var e,n,o=t.id,a=t.label,c=t.index,u=t.colour,l=t.onColourChange,s=Object(r.useRef)(null),b=Object(r.useState)(!1),j=Object(i.a)(b,2),d=j[0],C=j[1],v=Object(r.useCallback)((function(){C((function(t){return!t}))}),[]);e=s,n=v,Object(r.useEffect)((function(){var t=!1,r=!1,o=function(o){!t&&r&&e.current&&!e.current.contains(o.target)&&n(o)},a=function(n){r=!!e.current,t=!!e.current&&e.current.contains(n.target)};return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),document.addEventListener("click",o),function(){document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a),document.removeEventListener("click",o)}}),[e,n]);var m=Object(r.useCallback)((function(t){l(c,o,t)}),[c,o,l]);return Object(h.jsxs)("div",{className:"picker-container",children:[Object(h.jsxs)("label",{htmlFor:o,children:[a,Object(h.jsx)("button",{type:"button",style:{backgroundColor:f(u)},onClick:v})]}),d&&Object(h.jsx)("div",{className:"picker",ref:s,children:Object(h.jsx)(O.a,{color:u,onChange:m})})]})},v=(n(22),function(t){var e=t.index,n=t.firstColour,o=t.lastColour,a=t.onDurationChange,c=t.onColourChange,u=t.onDelete,l=t.showDeleteButton,s=Object(r.useRef)(null),i=Object(r.useRef)(null),b=Object(r.useRef)(null),j=Object(r.useCallback)((function(){var t,n,r,o=(null===(t=s.current)||void 0===t?void 0:t.valueAsNumber)||0,c=(null===(n=i.current)||void 0===n?void 0:n.valueAsNumber)||0,u=(null===(r=b.current)||void 0===r?void 0:r.valueAsNumber)||0;a(e,1e3*(3600*o+60*c+u))}),[e,a]),d=Object(r.useCallback)((function(){u(e)}),[e,u]);return Object(h.jsxs)("div",{className:"interval",children:[Object(h.jsxs)("div",{id:"duration",children:[Object(h.jsx)("label",{htmlFor:"hours",children:"H"}),Object(h.jsx)("input",{id:"hours",type:"number",placeholder:"0",min:"0",ref:s,onChange:j}),Object(h.jsx)("label",{htmlFor:"minutes",children:"M"}),Object(h.jsx)("input",{id:"minutes",type:"number",placeholder:"0",min:"0",ref:i,onChange:j}),Object(h.jsx)("label",{htmlFor:"seconds",children:"S"}),Object(h.jsx)("input",{id:"seconds",type:"number",placeholder:"0",min:"0",ref:b,onChange:j})]}),Object(h.jsx)(C,{id:"firstColour",label:"First Colour",index:e,colour:n,onColourChange:c}),Object(h.jsx)(C,{id:"lastColour",label:"Last Colour",index:e,colour:o,onColourChange:c}),l&&Object(h.jsx)("button",{type:"button",className:"delete-button",onClick:d,children:"X"})]})}),m=(n(23),n(26));var g=function(t){var e=t.start,n=t.intervals,o=t.setIntervals,a=t.setTotalDuration,c=Object(r.useCallback)((function(t,e){var r=Object(d.a)(n),c=Object(j.a)(Object(j.a)({},r[t]),{},{duration:e});r[t]=c,a(r.reduce((function(t,e){return t+e.duration}),0)),o(r)}),[n,o,a]),u=Object(r.useCallback)((function(t,e,r){var a=Object(d.a)(n),c=Object(j.a)(Object(j.a)({},a[t]),{},Object(b.a)({},e,r));a[t]=c,n.length>1&&"firstColour"===e&&t>0&&(a[t-1]=Object(j.a)(Object(j.a)({},a[t-1]),{},{lastColour:r})),n.length>1&&"lastColour"===e&&t<n.length-1&&(a[t+1]=Object(j.a)(Object(j.a)({},a[t+1]),{},{firstColour:r})),o(a)}),[n,o]),l=Object(r.useCallback)((function(){var t=Object(d.a)(n),e=t[t.length-1],r=Object(j.a)(Object(j.a)({},t[0]),{},{firstColour:e.lastColour,lastColour:(e.lastColour,t.indexOf(e)%2==0?new m.a(e.lastColour).tetrad()[3].darken(20):new m.a(e.lastColour).triad()[2].lighten(20))});t.push(r),o(t)}),[n,o]),s=function(t){var e=Object(d.a)(n);e.splice(t,1),0<t&&t<n.length-1&&(e[t]=Object(j.a)(Object(j.a)({},e[t]),{},{firstColour:Object(j.a)({},e[t-1].lastColour)})),o(e)};return Object(h.jsxs)("form",{action:"",onSubmit:e,children:[Object(h.jsx)("h1",{children:"Colour Timer"}),n.map((function(t,e){return Object(h.jsx)(v,{index:e,firstColour:t.firstColour,lastColour:t.lastColour,onDurationChange:c,onColourChange:u,onDelete:s,showDeleteButton:n.length>1},e)})),Object(h.jsx)("button",{type:"button",onClick:l,children:"Add interval"}),Object(h.jsx)("button",{type:"submit",children:"Start !"})]})},x=[{firstColour:{r:24,g:31,b:47},lastColour:{r:70,g:187,b:226},duration:0}];var p=function(){var t=Object(r.useState)(!1),e=Object(i.a)(t,2),n=e[0],o=e[1],a=Object(r.useState)(x),c=Object(i.a)(a,2),u=c[0],b=c[1],j=Object(r.useState)(),d=Object(i.a)(j,2),O=d[0],C=d[1],v=Object(r.useState)(),m=Object(i.a)(v,2),p=m[0],k=m[1],w=Object(r.useState)(0),y=Object(i.a)(w,2),D=y[0],S=y[1],E=Object(r.useState)(0),N=Object(i.a)(E,2),L=N[0],T=N[1],I=u[0].firstColour,A=Object(r.useCallback)(function(){var t=Object(s.a)(l.a.mark((function t(e,n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var a=new Date;C(a);var c=setInterval((function(){var r=new Date;r.getTime()>=a.getTime()+e.duration&&(n===u.length-1&&(o(!1),C(void 0),k(void 0)),t(),clearInterval(c)),k(r)}),e.duration/256)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[u.length]),F=Object(r.useCallback)(Object(s.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<u.length)){t.next=9;break}return n=u[e],T(e),t.next=6,A(n,e);case 6:e++,t.next=1;break;case 9:case"end":return t.stop()}}),t)}))),[A,u]),M=Object(r.useCallback)((function(t){t.preventDefault();try{if(0===D)throw new Error("Duration = 0")}catch(e){return console.error(e.message),!1}o(!0),F()}),[D,F]);if(p&&O){var B=(p.getTime()-O.getTime())/u[L].duration,R={r:Math.round((u[L].lastColour.r-u[L].firstColour.r)*B),g:Math.round((u[L].lastColour.g-u[L].firstColour.g)*B),b:Math.round((u[L].lastColour.b-u[L].firstColour.b)*B)};I={r:u[L].firstColour.r+R.r,g:u[L].firstColour.g+R.g,b:u[L].firstColour.b+R.b}}return Object(h.jsxs)("div",{className:"App",style:{backgroundColor:f(I)},children:[!n&&Object(h.jsx)(g,{start:M,intervals:u,setIntervals:b,setTotalDuration:S}),n&&u.map((function(t,e){return Object(h.jsx)("div",{className:"firstToLastColourCircle",style:{backgroundImage:"linear-gradient(to right, ".concat(f(t.firstColour),", ").concat(f(t.lastColour),")")}},e)}))]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(p,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.b69fe5bf.chunk.js.map